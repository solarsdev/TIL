# 주기적인 작업 관리

## 프로세스를 주기적으로 실행하는 방법

### 왜 주기적인 실행이 필요할까?

- 새벽 1시마다 보안 관련 도구 실행
- 백업 및 미러링 → 데이터베이스 백업, 리모트 호스트에 디렉토리 단위 복사 등
- 배치 작업 수행 (무거운 배치 작업을 많은 서버가 동시에 실행되지 않도록 주의
  - 예) sleep rand 9000 && 실행할 커맨드
- 시스템 정보를 메일로 전송
- 로그 데이터 관리
  - 로그 파일 로테이션
  - 일정 기간 지난 데이터는 압축, 그 후에는 삭제

### cron (cron job)

- 정의된 스케줄에 따라 명령을 실행하는 도구
- cron 작업을 수행하는 데몬은 시스템 시작 시 구동되고, 계속 실행이 됨
- 스케줄 설정 → cron table (crontab) 파일 작성
- crontab 관리
  ```bash
  $ crontab -e # 기존 crontab 항목 편집
  $ crontab -l # crontab 리스트 출력
  $ crontab -r # crontab 삭제
  # root 사용자는 다른 사용자의 crontab 정보도 확인 가능
  # crontab -e USER_ID
  ```

## 주기적인 작업 설정 방법

### crontab 설정

- 분(0-59) 시(0-24) 일(1-31) 월(1-12) 요일(0-6) 명령
  예) \* \* \* \* \* command: 매 1분마다 명령을 실행
  예) 0 \* \* \* \* command: 매 1시간마다 명령을 실행
  예) 0 0 \* \* \* command: 매 1일마다 명령을 실행
  예) 0 2 \* \* \* command: 매일 새벽 2시에 명령을 실행
  예) 0 2 \* \* 6 command: 매주 토요일 새벽 2시마다 명령을 실행
- `*`은 모든 것과 일치
- 하나의 정수는 정확히 그 값과 일치
- `-`기호는 분리된 두 정수 범위 값과 일치
- 범위 값 다음에는 단계 값이 포함 (예, 1-10/2)
- `,`로 분리된 범위 목록은 나열된 값중 하나와 일치
