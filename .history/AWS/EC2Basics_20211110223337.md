### 인스턴스 타입 변경

- EBS 기반 시스템에 적용 가능
  - 인스턴스 정지
  - 인스턴스 설정 > 인스턴스 타입 변경
  - 인스턴스 시작

### 강화된 네트워킹

- EC2 강화된 네트워킹 (SR-IOV - single root io virtualization)
  - SR-IOV(Single Root I/O Virtualization)는 시스템에서 여러 파티션이 동시에 실행되어 PCIe 장치를 공유할 수 있도록 PCI3 확장 스펙을 정의하는 PCIe(Peripheral Component Interconnect express) 표준 아키텍처입니다.
  - 더 많은 대역폭, 높은 PPS (초당 패킷), 낮은 지연속도
  - 옵션1: 엘라스틱 네트워크 어댑터 (ENA) 100Gbps까지 증가시킬 수 있음
  - 옵션2: 인텔 82599 VF를 통해 10Gbps까지 증가시킬 수 있음 - 레거시
  - 새로운 인스턴스 세대에 적용 가능
- Elastic Fabric Adapter (EFA)
  - HPC를 위한 강화된 ENA로 리눅스에서만 동작함
  - 내부 통신에 매우 좋으며, 같은 클러스터를 이용하기 때문에 서로 연관성이 강한 워크로드에 적합
  - Leverages Message Passing Interface (MPI) 규약을 따름
  - 언더라잉 호스트 리눅스 OS를 바이패스하여 낮은 지연속도와 안정적인 전송을 지원
- ENA를 확인하는 방법
  - modinfo ena
  - ethtool -i eth0
  - t2.micro, t3.micro 둘다 ENA를 쓰고있지만 t2 세대는 vif라는 가상화를 이용해서 제한이 걸려있음

### 배치 그룹

- EC2 인스턴스의 배치 전략을 설정하고 싶을 때
- 배치 그룹을 통해 정의됨
- 배치 그룹을 만들때 다음 중 하나의 전략을 선택할 수 있음
  - 클러스터: 싱글 AZ에 낮은 지연속도 그룹으로 클러스터를 구성 가능
    ![Cluster](images/cluster.png)
    - 같은 랙, 같은 AZ상에 모든 인스턴스를 그룹으로 묶음
    - 10Gbps 네트워크를 직접 접속형태로 사용 가능함
    - 이점: 네트워크 성능
    - 단점: 랙이 망가질 경우 모든 인스턴스를 사용할수 없게됨
    - 사용처: 빅데이터 처리, 매우 낮은 응답속도를 원하는 어플리케이션이나 고성능의 네트워크를 요구할 경우
  - 스프레드: 인스턴스를 AZ 안에서 다른 하드웨어 (호스트) 에 제공받는것을 보장받음, 단 7 인스턴스가 최대치
    ![Spread](images/spread.png)
    - 스프레드는 장애를 최대한 회피하기 위한 전략임
    - 이점: 다른 크로스 AZ로도 배포할 수 있음, 동시다발적인 장애에 대처 가능
    - 단점: 그룹당 가용 영역별로 최대 7개의 실행중인 인스턴스를 가질 수 있음
    - 사용처
      - 고가용성을 최대한 활용하고 싶은 어플리케이션
      - 서로 다른 하드웨어 장애로부터 영향을 받지 말하야 하는 크리티컬한 어플리케이션
  - 파티션: 인스턴스의 그룹을 스프레드 형태로 분산함. 인스턴스 그룹에는 수백대의 인스턴스가 존재할 수 있음
    ![Partition](images/partition.png)
    - 스프레드를 하나의 인스턴스가 아닌 인스턴스 그룹으로 운용하는 형태
    - 각각의 파티션은 같은 랙이며, 다른 파티션과는 랙을 공유하지 않는다
    - 파티션은 각 리전당 최대 7개까지 설치 가능하다
    - 사용처: HDFS, HBase와 같은 빅데이터 처리나 Cassandra, Kafka와 같은 분산형 시스템

### Shutdown 액션

![ShutdownFlow](images/shutdown_flow.png)

- Shutdown 액션: OS상에서 shutdown을 했을 경우 어떤 일이 일어날까?
  - Stop (기본)
  - 종료
- CLI 속성: **InstanceInitiatedShutdownBehavior**

### 종료 방지

- 종료 방지를 활성화
  - AWS 콘솔이나 CLI를 통한 의도치 않은 셧다운을 방지할 수 있음
- 시험 팁
  - 종료 방지가 설정되어 있을때
  - OS레벨에서 셧다운을 입력하면 어떻게 되나?
  - 결론 인스턴스는 삭제됨

### EC2 시작 시 문제 해결

- #InstanceLimitExceeded : 이 에러가 발생한다면, 이는 리전당 vCPU제한숫자를 초과했다는 의미가 된다
  - On-Demand 인스턴스는 리전당 숫자가 제한되어 있음
  - 온디맨드 (A,C,D,H,I,M,R,T,Z) 인스턴스 는 기본적으로는 64 vCPU로 제한되어 있음 (기본)
  - 이를 해소하기 위해서는 AWS 서포트에 요청해야 함
  - vCPU 제한은 온디맨드와 스팟 인스턴스에만 적용됨
- #InsufficientInstanceCapacity : 이 에러는 현재 AWS에 (AZ 베이스로) 충분한 온디맨드 용량이 남아있지 않다는 것을 의미함
  - 해결책
    - 몇 분정도 기다리기
    - 인스턴스 요청 갯수를 줄이기
    - 인스턴스의 타입을 변경해서 작성해보기
- #Instance Terminates Immediately (펜딩에서 바로 종료로 넘어갈 경우)
  - EBS 볼륨 제한이 걸림
  - EBS 스냅샷이 망가짐
  - 루트 EBS 볼륨이 암호화 되어있지만, 해당 KMS 키에 접근권한을 가지고 있지 않을 경우
- 문제해결을 위해서는 정확한 원인을 파악하는게 중요
  - EC2 콘솔에서 Description 탭을 이용하면 상세 이유가 적혀있음

### EC2와 SSH 관련 문제해결

- PEM파일을 다운로드 받으면 권한을 400으로 설정하는 것을 잊지 말것
- OS에서 부여된 기본 유저이름과 다른 경우에는 SSH 접속을 했을 때, Host key not found나 Permission denied 혹은 Connection closed by [instnace] port 22 에러 등을 볼 수 있음
- Connection Timeout이 나오는 경우
  - 일반적으로는 네트워크 관련 모든 사항을 점검해본다
  - 보안 그룹, NACL, 퍼블릭 IP가 없는지 여부 등등
  - 때때로 CPU 부하가 심할 경우 응답을 하지 못해 이러한 에러 메시지가 나오는 경우도 있음

### SSH와 EC2 인스턴스 접속 (Instance Connect)와의 차이점

![SSHVsInstanceConnect](images/ssh_vs_instance_connect.png)

- SSH를 접속할때는 보안그룹에 직접 접속자의 IP를 지정하는 방식
- Instance Connect의 경우에는 EC2가 속한 네트쿼으 영역에 API로 접속해서 해당 아이피를 이용하여 접속하는 방식
- 아마존 아이피 범위를 확인하고 EC2_INSTANCE_CONNECT 를 검색해서 해당 범위를 추가해주면 엑세스 가능

### EC2 인스턴스 구입 옵션

- 온디맨드: 예측가능한 비용
- 예약: (최소 1년)
  - 예약된 인스턴스: 긴 워크로드
  - 컨버터블 예약 인스턴스: 타입을 변경가능한 긴 워크로드
  - 스케줄된 예약 인스턴스: 매 목요일 3~6시 등등
- 스팟 인스턴스: 짧은 워크로드 비용이 저렴하나 안정적이지 못하고 인스턴스를 도중에 삭제당할 수 있음
- 데디케이티드 호스트: 전체 물리서버를 예약하여 사용하며 인스턴스 배치를 조정 가능함

### 온디맨드

- 사용한만큼 비용이 과금
  - Linux - 1분과금 뒤에는 초당 과금모델
  - 다른 모든 OS (예를들면 윈도우)의 경우에는 시간당 과금
- 가장 비싸지만, 초기비용이 없음
- 긴 호흡으로는 추천하지 않음
- 짧은 기간, 방해받지 않을 워크로드에 추천하며, 어플리케이션의 용량을 예측하기 어려울때 사용하는것을 추천

### 예약 인스턴스

- 온디맨드 대비 최대 75%의 할인을 제공
- 예약 기간: 1년 할인율 + 3년 할인율 +++
- 구입 옵션: 초기비용 없음, 일부 초기비용 지불 +, 전체 선지불 ++
- 특정 인스턴스 타입을 예약하는 개념
- 데이터베이스와 같이 정해진 형태의 인스턴스에 추천됨
- 만약 인스턴스 타입을 정하기 어렵다면, 컨버터블 예약 인스턴스를 활용
  - EC2 인스턴스 타입을 지정하지 않음
  - 최대 54% 할인율
- 예약된 시간 인스턴스
  - 예약된 시간에 실행되는 예약 할인
  - 일 / 주 / 월 등의 기간설정
  - 1 / 3년의 지정은 유효함

### 스팟 인스턴스

- 온디맨드 대비 최대 90%의 할인을 제공
- 지불 가격보다 스팟 가격이 높아지면 인스턴스를 강제 종료당할 위험이 있음
- AWS에서 가장 비용 효율적인 모델
- 장애에 내구성이 있는 워크로드 모델의 경우 유용함
  - 배치 작업
  - 데이터 분석
  - 이미지 처리
  - 분산형 서비스
  - 시작과 끝이 정해져 있지 않은 워크로드 모델
- 데이터베이스나 크리티컬 어플리케이션에는 사용이 불가능

### EC2 전용 호스트

- 아마존 EC2 전용 호스트는 EC2 인스턴스의 물리적 서버 전체를 빌리는 옵션
- **컴플라이언스 충족**이나 **소프트웨어 라이센스** (물리적 서버를 기반으로 한)를 맞추기 위한 옵션으로 활용
- 3년간의 예약이 가능
- 전체 서버를 빌리는 것이기 때문에 비용이 비쌈
- BYOL 라이센스를 충족시킬 수 있음
- 규제를 지키거나 컴플라이언스에서 요구하는 경우 활용 가능

### EC2 전용 인스턴스

![DedicatedInstance](images/dedicated_instance.png)

- 전용으로 제공되는 하드웨어에서 인스턴스를 동작시킴
- 같은 계정의 다른 인스턴스들과 하드웨어를 공유할 수 있음
- 하드웨어에 다른 AWS 유저들이 사용하는것은 막을 수 있으나 언더라잉 리소스에 대한 컨트롤 권한은 받지 못함

### EC2 스팟 인스턴스 요청

- 온디맨드에 비해 90% 할인을 얻을 수 있음
- 최대 스팟 요금을 지정하면, 현재 스팟 요금이 해당 요금보다 낮은 한에서는 계속 사용 가능
  - 시간당 스팟 요금은 그때 그때의 요청과 재고에 따라 달라짐
  - 현재 스팟 요금이 지정한 최대 스팟 요금보다 올라갈 경우, 인스턴스를 1분내에 정지하거나, 그렇지 않으면 인스턴스를 삭제당함
- 다른 요금전략: 스팟 블록
  - 블록 스팟 인스턴스는 일정 시간 기간 (1~6시간) 동안 방해받지 않는것을 보장하는 방식임
  - 단, 정말 드물게 종료당하는 경우가 있을수도 있음
- 배치 작업, 데이터 분석, 장애조치에 내구성이 있는 워크로드의 경우에 추천함
- 크리티컬 작업이나 데이터베이스에는 사용이 힘듬

### EC2 Spot Instance 요금

![SpotInstancePricing](images/spot_instance_pricing.png)

- 스팟 요금이 계속해서 변화하지만 온디맨드보다 훨씬 저렴한것을 알 수 있음
- 스팟 요금이 설정한 최대 스팟 요금을 넘어설 경우 인스턴스를 종료하거나 삭제당함
- 종료한 인스턴스는 스팟 요금이 최대 설정 스팟 요금보다 낮아질경우 다시 시작할 수 있음

### 스팟 인스턴스를 종료하는 방법

![SpotInstanceFlow](images/spot_request_flow.png)

- 스팟 요청의 구성
  - 최대 스팟 요금
  - 요구하는 인스턴스의 숫자
  - 시작 설정 (인스턴스 타입 등등)
  - 요청 타입 (1회성, 계속)
  - 언제부터 언제까지 요청이 유효한지
    ![SpotRequestFlow](images/spot_request_flow.png)
- 스팟 요청을 하게 될 경우 1회성이면 요청이 성공하면 사라짐
- 그게 아닐 경우 계속해서 요청이 유효하게 됨
  - 스팟 요청을 무기한으로 둘 경우, 스팟을 취소하고 싶으면 인스턴스부터 취소하는것이 아닌 요청을 먼저 삭제해야 함
  - 인스턴스를 먼저 삭제하게 되면 스팟 요청에 의해 인스턴스가 계속해서 만들어지기 때문

### 스팟 플릿

- 스팟 인스턴스 + (옵션) 온디맨드 인스턴스
- 스팟 플릿은 타겟 가용성과 가격대를 지정해두면, 자동으로 선정하여 구동하는 형태임
  - 예를 들면 시작 풀에 인스턴스 타입, OS, AZ 등을 설정해두면 최적의 가격대를 자동으로 지정하여 실행함
- 스팟 인스턴스를 배포하는 전략
  - 최저 가격: 가장 낮은 가격대가 형성되어 있는 풀을 선택 (가격 최적화, 짧은 워크로드)
  - diversified: 서로 다른 풀을 이용 (가용성에 최적, 긴 워크로드)
  - 가용성 최적화: 설정한 가용성에 최적화된 인스턴스들을 선택
- 스팟 플릿은 자동으로 스팟 인스턴스를 골라서 최대한 저렴하게 이용가능하게 도와줌

### EC2 인스턴스 타입 (메인)

- R: 램이 많이 요구되는 어플리케이션 - 메모리 캐시 등
- C: CPU가 많이 요구되는 어플리케이션 - 컴퓨터, 데이터베이스
- M: 밸런스 형 (미디움) - 일반 / 웹앱
- I: 로컬 I/O가 많이 필요한 경우 (인스턴스 스토리지) - 데이터베이스
- G: GPU 중심 어플리케이션 - 비디오 렌더링 / 머신 러닝
- T2 / T3: 버스트 가능한 인스턴스 (허용량에 한해)
- T2/ T3 언리밋: 무제한 버스트
- 테스트 사이트
  [Amazon EC2 Instance Comparison](https://instances.vantage.sh/)

### 버스트 가능한 인스턴스 (T2/T3)

- AWS에는 버스트 가능한 컨셉을 지닌 인스턴스 타입이 있음
- 버스트 형태지만 일반적으로 적당한 정도의 CPU 수준을 지니고 있음
- 갑자기 CPU의 사용량이 증가하거나 할 경우 버스트를 활용하며 향상된 수준의 CPU 퍼포먼스를 보여줌
- 버스트중에는 버스트 크레딧을 사용하고, 크레딧이 전부 소진되면 CPU 퍼포먼스가 매우 하락함
- 버스팅이 중단되면 크레딧이 다시 복구됨
- 버스트형은 예기치 못한 트래픽이나 처리량을 감당할때 활용성이 높은 기능임
- 지속적인 퍼포먼스 요구량으로 인해 크레딧이 소진되거나 하는 일이 발생하면 버스트형이 아닌것으로 변경을 검토해야 함
- T2/T3 무제한형
- 2017 11월에 릴리즈한 형태로 무제한 버스팅이 가능한 타입
- 크레딧을 전부 소진한 이후에는 과금을 통해 버스팅을 유지할 수 있음
- CPU 크레딧을 전부 소진한 형태의 그래프를 알아두면 도움이 될 수 있음
  ![BurstCredit](images/burst_credit.png)
  - 크레딧이 있을때는 100%의 CPU 사용률을 보여주지만, 전부 소진되면 베이스라인 CPU까지 제한이 걸림
- 무제한 타입
  - 무제한 버스트 크레딧을 사용할 수 있음
  - 크레딧이 전부 소진될 경우 과금을 통해 CPU제한을 해제할 수 있음
  - 과금이 계속되면 비용이 상당히 많이 나오기 때문에 조심해야 함
    ![BurstCreditUnlimited](images/burst_credit_unlimited.png)

### 엘라스틱 IP

- EC2 인스턴스를 정지했다가 다시 가동하게 되면 공용 IP가 변경됨
- 공용 IP의 변경을 막기 위해서는 엘라스틱 IP가 필요
- 엘라스틱 IP는 퍼블릭 IPv4 형태로 지우지 않는 한 계속 소유하게 되는 IP주소임
- 한번에 하나의 인스턴스에 부여할 수 있음
- 인스턴스간 재지정이 가능
- 서버에 엘라스틱 IP를 붙여두지 않으면 과금됨
- 서버에 붙여준 엘라스틱 IP는 과금되지 않음
- 유스케이스
  - 엘라스틱 IP를 사용하면, 복수 인스턴스를 준비해둔 상태로 장애발생시 빠르게 다른 인스턴스로 전환가능함
  - 최대 5개의 엘라스틱 IP를 보유 가능 (AWS Support를 통해 제한 해제 가능)
- 엘라스틱 IP의 사용을 피하는 방법
  - 대체안이 항상 있다는것을 생각해보자
  - 랜덤 공용IP를 이용하고 DNS 이름에 등록할 수 있음
  - 로드 밸런서를 이용해서 고정 호스트명을 사용할 수 있음

### ✨ 매우 중요: EC2 인스턴스의 CloudWatch 지표

- AWS에서 제공되는 지표(AWS가 푸시하는 데이터)
  - 기본 모니터링: 5분마다 지표들이 수집됨
  - 강화된 모니터링(과금): 1분마다 지표들이 수집됨
  - CPU, 네트워크, 디스크, 상태체크 지표들이 수집됨
- 커스텀 지표(수동 설정을 통한 푸시)
  - 기본 해상도: 1분마다 지표 수집
  - 고해상도: 최대 설정으로 1초마다 지표 수집
  - 램을 포함한 어플리케이션 수준의 지표
  - CloudWatch에 지표를 푸시할 적절한 IAM 권한이 필요

### EC2 관련 지표들

- CPU: CPU 사용률, 크레딧 사용량 남은량
- 네트워크: 네트워크 인 아웃
- 상태 체크
  - 인스턴스 상태: EC2 버츄얼 머신의 상태
  - 시스템 상태: 언더라잉 하드웨어의 상태
- 디스크: 읽기 쓰기 Ops, Bytes (인스턴스 스토어만 디스크 읽기 쓰기 지표를 지원함)
- 램 체크는 EC2 기본 지표로서 제공되지 않음

### 통합 클라우드워치 에이전트

![UnifiedCloudWatchAgent](images/unified_cloudwatch_agent.png)

- EC2 혹은 온프레미스에서도 사용 가능
- 추가적인 시스템단위 지표(예를 들면 램이나 프로세서, 사용된 디스크 용량 등등)를 수집
- 수집된 로그는 클라우드워치 로그로 전송됨
  - 에이전트를 이용하지 않으면 수집된 로그는 전송되지 않음
- SSM 매개변수 저장소를 이용하면 중앙화된 설정이 가능
- IAM 권한 설정을 잊지 말것 EC2라면 역할을 지정, 온프레미스에서는 AccessKey로 관리 등
- 통합 에이전트에서 수집된 데이터의 기본 네임스페이스는 CWAgent(이는 수정가능)로 설정됨

### 통합 클라우드워치 에이전트 - Procstat Plugin

- 개별 프로세스들의 지표와 시스템 사용률등을 수집
- 리눅스와 윈도우 둘 다 지원
- 예를 들면, 특정 프로세서의 CPU 사용이나 메모리 사용량 등
- 어떤 프로세스의 데이터를 수집할지 결정하려면
  - pid_file: 프로세스의 개별 숫자아이디 (PID) 파일
  - exe: 프로세스 이름으로 정규식 형태
  - pattern: 프로세스를 시작할때 사용하는 커맨드라인으로 정규식 형태
- 지표들은 procstat이라는 prefix가 붙은 상태로 수집됨
  - procstat_cpu_time
  - procstat_cpu_usage ...

### 상태 체크

- 자동으로 하드웨어 및 소프트웨어의 상태를 체크
- 시스템 상태 체크
  - AWS 시스템의 문제등을 모니터링 (물리적 호스트의 소프트웨어/하드웨어 이슈나 파워 다운 등)
  - 퍼스널 헬스 대시보드에서 예정된 크리티컬 유지보수가 있다면 알림을 받게 됨
  - 하드웨어 장애를 발견할시 해야할 조치와 내부 흐름에 대해
    ![AWSSystemStatusCheck](images/aws_system_status_check.png)
  1. 기존 Host1 시스템에 EC2가 운용되고 있을때 Host 시스템에 장애가 생김
  2. 유저는 EC2를 정지 및 재시작
  3. 새로운 Host로 EC2가 할당됨 (그래서 퍼블릭 IP가 변경되는 것임 - 기존 AWS사양)
     1. 이 단계에서 엘라스틱 IP가 할당될 수 있음
  4. 정상 Host에서 EC2를 운영할 수 있음
- 인스턴스 상태 체크
  - 인스턴스의 하드웨어 및 소프트웨어 상태를 체크 (네트워크 설정 문제나 메모리 실패 등)
  - 해결책: 인스턴스의 재시작 및 인스턴스 설정 변경

### 상태 체크 - CW 지표와 복구

- 클라우드워치 지표 (1분 단위)
  - StatusCheckFailed_System
  - StatusCheckFailed_Instance
  - StatusCheckFailed (for both)
- 옵션1: 클라우드워치 알람
  ![CloudWatchAlarm](images/cloudwatch_alarm.png)
  - 클라우드워치 알람을 이용해서 Action: recover를 통해 EC2의 기존 private/public IP, EIP, 메타데이터, 배치 그룹등을 동일한 상태로 복구시도
  - 시스템 상태 체크에만 이용 가능, 인스턴스 상태 실패에는 재시작을 설정할 수 있다
  - SNS 알림을 전송
- 옵션2: 오토 스케일링 그룹
  - min/max/desired 를 1로 설정해두면 장애 발생시 셧다운 처리되고 새롭게 만들어짐
  - 단 이 경우에는 같은 private/public IP를 보장받지 못함 (새로 만들기 때문)
- 당연하게도 옵션1이 더 선호되지만, 옵션2의 경우에는 기본적으로 오토 스케일링 그룹에 들어가 있는 장애에 유연한 시스템에서는 자동으로 지원되는 기능일 수는 있겠다

### 상태 체크에서 필수로 알아야할 차이점

- 시스템 상태 체크
  - AWS 언더라잉 시스템
    - 네트워크 문제
    - 시스템 전원 문제
    - 물리 호스트의 소프트웨어적 문제
    - 네트워크 설정에 의한 패킷 문제 (라우팅 등)
  - AWS가 해당 호스트의 문제를 해결할때까지 기다리거나
  - 다른 호스트로 이동 (정지 및 시작) EBS로 운영되는 시스템일 경우 가능
- 인스턴스 상태 체크
  - 다음과 같은 문제들
    - 시작 설정에 문제가 있어서 네트워크를 사용 불가능하게 됨
    - 메모리가 부족
    - 파일 시스템이 망가짐
    - 커널에 문제가 생김
  - 관련 문제를 직접 수정
  - EC2 인스턴스의 재기동
  - EC2 인스턴스의 설정을 변경

### EC2 하이버네이트

- 인스턴스를 중지하거나 재시작 할수 있지만..
  - Stop: EBS에 데이터를 저장한 상태로 다음 시작까지 대기
  - 종료: 루트 EBS 볼륨이 종료시 삭제되게 되어 있었다면 모든 데이터는 소실, 추가 EBS는 남음
- 그럼 시작할때는 어떤 일이 일어날까?
  - 첫 시작: OS 시작과 함께 EC2 유저 데이터 스크립트가 실행됨
  - 그 이후의 시작에는 OS 부트스트랩만 실행
  - 그리고 어플리케이션이 실행되며 캐시등 웜업 작업이 진행된 뒤에 완전한 시작이 됨
  - 이러한 작업들에는 당연하게도 작업 시간이 소요되며 실제 기동까지 어느정도 시간이 걸림
- EC2 하이버네이트란
  - 램에 남아있던 모든 작업들은 저장됨
  - 인스턴스의 부팅이 훨씬 빠름 (OS가 재시작된것이 아니기 때문)
  - 실제 뒷단에서는 어떤일이? : 모든 램 데이터가 EBS에 파일로 기재됨
  - 루트 EBS 볼륨은 반드시 암호화 되어 있어야 함
    ![EC2Hibernate](images/ec2_hibernate.png)
  1. 암호화된 EBS 루트 볼륨에서 돌아가는 EC2 인스턴스
  2. RAM에 있는 모든 작업내용이 정지되고 EBS 볼륨에 저장됨
  3. 재시작시에 EBS에 있는 내용을 램으로 복구
  - 유스케이스
    - 작업시간이 매우 긴 프로세스
    - 램 상태를 저장해야 할 경우
    - 최초 시작에 아주 긴 시간이 소진되는 서비스의 경우

### 하이버네이트에서 추가로 알아야 할 내용 (실전용)

- 지원하는 인스턴스 종류
  - C3, C4, C5
  - M3, M4, M5
  - R3, R4, R5
- 인스턴스 램 크기: 150기가 이하
- 인스턴스 크기: 베어메탈에서는 지원하지 않음
- AMI: Amazon Linux 2와 Ubuntu... & Windows
- Root Volume: 암호화 필수, 인스턴스 스토어가 아닐것, 램을 저장할 정도로 충분히 클것
- 온디맨드나 예약 인스턴스일것, 스팟 인스턴스에서는 제공하지 않음
- 하이버네이트된 상태로 60일을 넘길 수 없음
