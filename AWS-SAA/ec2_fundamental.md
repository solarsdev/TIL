# EC2 기본

## AWS Budget Setup (요금 알림 설정)

- IAM 유저에서 청구 관련 내용을 확인할 수 있도록 권한을 설정하는 부분을 체크해줌
- 예산 설정(Budget Setup)을 통해 월간 예산을 일정 수준으로 잡아두면, 해당 예산이 근접했을 경우에 알림을 받을 수 있음
  - Threshold(근접치) 정도를 설정 (예를 들어, 예산의 80% 등)
  - 실제(actual), 예상(forecast)을 분류해서 설정 가능
    - 예상(forecast)이란, 현재 이대로 월말까지 사용했을때 어느정도 비용이 발생할지 예측해주는 기능
  - 알림은 이메일 등으로 설정 가능

## Amazon EC2

- EC2는 AWS에서 제공하는 가장 잘 알려진 서비스 중 하나
- EC2는 Elastic Compute Cloud의 약어로 IaaS를 의미함
- 주요 기능 및 개요로 다음과 같은 것들이 존재
  - 가상 머신의 대여 (EC2)
  - 가상 드라이브에 데이터를 저장 (EBS)
  - 각 가상 머신에 대한 부하를 분산 (ELB)
  - 각 서비스가 들어있는 가상 머신을 자동으로 조절 (ASG)

## EC2 크기 및 설정 옵션

- OS(운영체제)의 선택
  - Linux
  - Windows
  - MacOS
- 컴퓨팅 퍼포먼스 & 코어
- 메모리 용량
- 저장소 타입
  - 네트워크 타입 (EBS & EFS)
  - 로컬 스토리지 타입 (EC2 Instance Store)
- 네트워크 카드, IP 부여 (public ip)
- 방화벽 설정 (보안 그룹: security group)
- 부트스트래핑 스크립트 (첫 기동시 실행할 스크립트)

## EC2 User Data (부트스트래핑)

- EC2 User Data라고 불리는 스크립트를 이용할 수 있음
- 가상 머신이 처음 실행될때 기동되어야 할 일련의 작업 명세서로, 최초 실행시에만 동작하며 그 이후에는 재기동 등을 하더라도 동작하지 않음
- 이러한 스크립트에서 실행시킬 작업의 예로서 다음과 같은 것들이 존재함
  - OS 업데이트
  - 소프트웨어 설치
  - 서비스에 필요한 파일의 다운로드 및 준비
  - 기타 등등
- EC2 User Data 스크립트는 루트 유저 권한으로 실행됨

## EC2 인스턴스 타입

[Amazon EC2 Instance Types - Amazon Web Services](https://aws.amazon.com/ec2/instance-types/)

- AWS는 서비스에 필요한 다양한 타입의 인스턴스를 제공하고 있으며, 유저는 해당 타입중 하나를 선택해서 이용할 수 있음
- AWS에서 제공하는 인스턴스를 분류하기 위해 이름에 컨벤션을 가지고 있음
  - m5.2xlarge
  - m → 인스턴스 클래스
  - 5 → 인스턴스 세대
  - 2xlarge → 인스턴스 클래스에서 제공하는 사이즈 (CPU, RAM등)

### 일반적인 목적 (T시리즈: Tiny)

- 웹서버와 코드 저장소와 같이 일반적인 워크로드를 처리하는데 적합하게 설계된 인스턴스 클래스
- 컴퓨팅파워, 메모리, 네트워킹이 적절하게 배분되어 있음
- 그중에서도 t2.micro 타입은 프리티어 대상으로 활용되고 있음

### 컴퓨팅 최적화 (C시리즈: Compute)

- 컴퓨팅에 특화된 작업을 소화해낼 수 있는 고성능 프로세서를 탑재한 인스턴스 클래스
- 사용 예제
  - 배치 작업
  - 미디어 트랜스코딩
  - 고성능 웹서버
  - 고성능 컴퓨팅 (HPC)
  - 머신러닝, 모델링
  - 분산 게이밍 서버

### 메모리 최적화 (R시리즈: Ram)

- 빠른 성능이 요구되는 워크로드, 특히 메모리에 의한 작업이 많이 요구되는 경우에 적합하게 설계된 클래스
- 사용 예제
  - 고성능 관계형, 비관계형 데이터베이스
  - 웹 서버 캐시 스토리지
  - BI에 최적화된 메모리 데이터베이스
  - 빅데이터 처리용 프로세서

### 스토리지 최적화 (I시리즈: IO)

- 스토리지에 최적화된 작업, 예를 들면 순차읽기나 쓰기와 같은 많은 엑세스가 동시에 일어나는 작업에 특화된 클래스
- 사용 예제
  - 고빈도 온라인 트랜잭션 처리 (OLTP)
  - 관계형 또는 NoSQL 데이터베이스
  - 메모리 캐시형 데이터베이스 (Redis)
  - 데이터 웨어하우스 어플리케이션
  - 분산 파일 시스템
