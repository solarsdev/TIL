# ìŠ¤ì½”í”„

## ìŠ¤ì½”í”„ë€?

[Scope - MDN Web Docs Glossary: Definitions of Web-related terms | MDN](https://developer.mozilla.org/en-US/docs/Glossary/Scope)

- Scope â†’ ë²”ìœ„, ì˜ì—­
- í”„ë¡œê·¸ë˜ë°ì—ì„œëŠ” ë³€ìˆ˜ë¥¼ `ì°¸ì¡°í•  ìˆ˜ ìˆëŠ”` ìœ íš¨í•œ ë²”ìœ„
- `ì‹ë³„ì`ê°€ ìœ íš¨í•œ ë²”ìœ„
  - ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤ ì´ë¦„
  - ì„ ì–¸ëœ ìœ„ì¹˜ì— ë”°ë¼ ìœ íš¨ ë²”ìœ„ê°€ ê²°ì •ë¨
- ìŠ¤ì½”í”„ëŠ” ë¸”ëŸ­ ì•ˆì—ì„œ ì •ì˜ë˜ë©°, ë¸”ëŸ­ ì•ˆì˜ ë³€ìˆ˜ëŠ” ë¸”ëŸ­ ì•ˆì—ì„œë§Œ ìœ íš¨
- ì™œ ìŠ¤ì½”í”„ê°€ ì¡´ì¬í•˜ë‚˜?
  - ì´ë¦„ ì¶©ëŒì„ ë°©ì§€
  - ë©”ëª¨ë¦¬ ê´€ë¦¬ (ë¸”ëŸ­ì´ ëë‚˜ë©´ ë³€ìˆ˜ê°€ ì •ë¦¬ë¨)
- ê²°ë¡  â†’ ë³€ìˆ˜ëŠ” ìµœëŒ€í•œ í•„ìš”í•œ ê³³ì—ì„œë§Œ ì •ì˜í•´ì•¼ í•¨

```jsx
// ì½”ë“œ ë¸”ëŸ­: {}, if() {}, for() {}, function() {}
// ë¸”ëŸ­ ì™¸ë¶€ì—ì„œëŠ” ë¸”ëŸ­ ë‚´ë¶€ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ âŒ
{
  const a = 'a';
  // aê°€ ìœ íš¨í•œ ë²”ìœ„ëŠ” ë¸”ëŸ­ ì•ˆì—ì„œë§Œ
  console.log(a);
}
// console.log(a);
const b = 'b';

// í•¨ìˆ˜ ì™¸ë¶€ì—ì„œëŠ” í•¨ìˆ˜ ë‚´ë¶€ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ âŒ
function print() {
  const message = 'Hello, world!';
  console.log(message);
}
// console.log(message);

// í•¨ìˆ˜ ì™¸ë¶€ì—ì„œëŠ” í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ âŒ
function sum(a, b) {
  console.log(a, b);
}
// console.log(a, b);
```

## ìŠ¤ì½”í”„ ì˜ˆì œ

```jsx
{
  const x = 1;
  {
    const y = 2;
    console.log(x);
  }
  console.log(x);
  // console.log(y); // ì—ëŸ¬
}

const text = 'global'; // ì „ì—­ ë³€ìˆ˜, ì „ì—­ ìŠ¤ì½”í”„ (ê¸€ë¡œë²Œ ë³€ìˆ˜, ê¸€ë¡œë²Œ ìŠ¤ì½”í”„)
{
  const text = 'inside block1'; // ì§€ì—­ ë³€ìˆ˜, ì§€ì—­ ìŠ¤ì½”í”„ (ë¡œì»¬ ë³€ìˆ˜, ë¡œì»¬ ìŠ¤ì½”í”„)
  {
    console.log(text);
    // ê°€ì¥ ê°€ê¹Œìš´ ìŠ¤ì½”í”„ê°€ ë¨¼ì € ì°¸ì¡°ë¨
    // ê°™ì€ ë¸”ëŸ­ > ë°”ë¡œ ìœ„ ë¶€ëª¨ > ... > ê¸€ë¡œë²Œ ë³€ìˆ˜
  }
}
```

## ê°€ë¹„ì§€ ì»¬ë ‰í„° (Garbage Collector)

[Memory Management - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management)

- í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì¸ Cì—ì„œëŠ” ê°œë°œìê°€ ì§ì ‘ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ í•´ì•¼ í•¨
- ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  ì •ë¦¬í•˜ëŠ” ê²ƒ ê¹Œì§€ ê°œë°œìê°€ ì§ì ‘ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ë©”ëª¨ë¦¬ ê´€ë¦¬ ì—¬ë¶€ì— ë”°ë¼ì„œëŠ” í”„ë¡œê·¸ë¨ì´ crash í•  ìˆ˜ ìˆìŒ
- C#, Go, Java, JavaScriptì˜ ê²½ìš° ê°€ë¹„ì§€ ì½œë ‰í„°ê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ìˆ˜ë™ìœ¼ë¡œ í•´ì•¼ í•  í•„ìš”ëŠ” ì—†ìŒ
- JavaScriptì—ì„œ GCê°€ ì‘ë™í•˜ëŠ” ì›ë¦¬
  ```jsx
  let apple = {
    name: 'apple',
  };
  let orange = apple;
  orange = null;
  apple = null;
  // orange, appleì— ì €ì¥ë˜ì–´ ìˆë˜ ì£¼ì†Œê°’ì´ ì œê±°ë˜ë©´
  // object ë‚´ìš©ì˜ ê²½ìš°ì—ëŠ” ë¶ˆí•„ìš”í•˜ê¸° ë•Œë¬¸ì— GCê°€ íŒŒì•…ë˜ë©´ ì •ë¦¬ë¨
  ```
- GCëŠ” JavaScript ì—”ì§„ì˜ ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ë¡œ ë™ì‘ë¨
- GCì˜ ì‘ì—… ë˜í•œ CPUë¥¼ í• ë‹¹ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì´ë¯€ë¡œ, ë„ˆë¬´ ìì£¼ ì‹¤í–‰ë˜ì–´ë„ ê³¤ë€í•˜ê³  ì—¬ìœ ì‹œê°„ì— ì‹¤í–‰í•´ì•¼ í•  í•„ìš”ê°€ ìˆìŒ

```jsx
// ê¸€ë¡œë²Œ ë³€ìˆ˜ëŠ” ì•±ì´ ì¢…ë£Œë  ë•Œê¹Œì§€ ë©”ëª¨ë¦¬ì— ìœ ì§€ë¨!
const global = 1;
{
  // ë¸”ëŸ­ ë‚´ë¶€ì—ì„œë§Œ ì¡´ì¬í•˜ê³ , ë¸”ëŸ­ì´ ëë‚˜ë©´ GCì— ì˜í•´ ì •ë¦¬ë¨
  const local = 1;
}
function print() {
  // í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë„ ë¸”ëŸ­ì•ˆì—ì„œ í•„ìš”í•œ ê²½ìš°ì—ëŠ”
  // í•„ìš”í•œ ê³³ì—ì„œë§Œ ë³€ìˆ˜ë¥¼ ì •ì˜í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ ì¸¡ë©´ì—ì„œ ì¢‹ìŒ
  if (true) {
    let temp = 0;
  }
}
```

## ë ‰ì‹œì»¬ í™˜ê²½ì´ë€?

### ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ Execution Context

- ì½”ë“œì˜ ì‹¤í–‰ ìˆœì„œì™€ ìŠ¤ì½”í”„ë¥¼ ê¸°ì–µí•˜ê³  ìˆìŒ
- í•˜ë‚˜ì˜ ì‹±ê¸€ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ (JavaScript)

```jsx
// ì „ì—­ ìŠ¤ì½”í”„
const a = 1;
{
  // ë¸”ëŸ­1 ìŠ¤ì½”í”„
  const a = 2;
  {
    // ë¸”ëŸ­2 ìŠ¤ì½”í”„
    const a = 3;
  }
}
```

- ê°ê°ì˜ ë¸”ëŸ­ì€ {} ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–»ê²Œ êµ¬ë¶„ë˜ê³ , ë¶€ëª¨ì„ì„ ì–´ë–»ê²Œ ì •ì˜í•˜ê³ , ì–´ë–»ê²Œ ë³€ìˆ˜ë¥¼ ì°¾ì•„ë‚¼ê¹Œ?
  - ê°ê°ì˜ ë¸”ëŸ­ì€ ë ‰ì‹œì»¬ í™˜ê²½ (Lexical Environment)ë¼ëŠ” ë‚´ë¶€ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆìŒ
  - ë ‰ì‹œì»¬ í™˜ê²½ì€ ë‚´ë¶€ ë³€ìˆ˜ê°€ ì–´ë–¤ê²ƒë“¤ì´ ìˆëŠ”ì§€, ë¶€ëª¨ê°€ ëˆ„êµ¬ì¸ì§€ ë“± ì •ë³´ë¥¼ ì†Œìœ í•˜ê³  ìˆëŠ” ê°ì²´ì„
  - ë¸”ëŸ­ = í•¨ìˆ˜, ì¼ë°˜ ë¸”ëŸ­ ì „ë¶€ í¬í•¨ë¨
- ë ‰ì‹œì»¬ í™˜ê²½ (Lexical Environment)
  - í™˜ê²½ ë ˆì½”ë“œ (Environment Record)
    - í˜„ì¬ ë¸”ëŸ­ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë‹´ê³  ìˆìŒ
  - ì™¸ë¶€ í™˜ê²½ ì°¸ì¡° (Outer Lexical Environment Reference)
    - ë¶€ëª¨ê°€ ëˆ„êµ¬ì¸ì§€ë“±ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë‹´ê³  ìˆìŒ
- ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ
  1. ì „ì—­ ìŠ¤ì½”í”„ ë ‰ì‹œì»¬ í™˜ê²½
     1. ì „ì—­ ìŠ¤ì½”í”„ í™˜ê²½ ë ˆì½”ë“œ â†’ ì „ì—­ ë³€ìˆ˜ ì •ë³´
     2. ì „ì—­ ìŠ¤ì½”í”„ ì™¸ë¶€ í™˜ê²½ ì°¸ì¡° â†’ null
  2. ë¸”ëŸ­1 ìŠ¤ì½”í”„
     1. ë¸”ëŸ­1 ìŠ¤ì½”í”„ í™˜ê²½ ë ˆì½”ë“œ â†’ ë¸”ëŸ­1 ë³€ìˆ˜ ì •ë³´
     2. ë¸”ëŸ­1 ìŠ¤ì½”í”„ ì™¸ë¶€ í™˜ê²½ ì°¸ì¡° â†’ ì „ì—­ ë ‰ì‹œì»¬ í™˜ê²½ (ìŠ¤ì½”í”„ ì²´ì¸)
  3. ë¸”ëŸ­2 ìŠ¤ì½”í”„
     1. ë¸”ëŸ­2 ìŠ¤ì½”í”„ í™˜ê²½ ë ˆì½”ë“œ â†’ ë¸”ëŸ­2 ë³€ìˆ˜ ì •ë³´
     2. ë¸”ëŸ­2 ìŠ¤ì½”í”„ ì™¸ë¶€ í™˜ê²½ ì°¸ì¡° â†’ ë¸”ëŸ­1 ë ‰ì‹œì»¬ í™˜ê²½ (ìŠ¤ì½”í”„ ì²´ì¸)
  - ë¸”ëŸ­ì´ ì¢…ë£Œë˜ë©´ GCëŠ” ìŠ¤íƒì—ì„œ í•´ë‹¹ ë¸”ëŸ­ì— í•´ë‹¹í•˜ëŠ” ë‚´ìš©ì„ ì •ë¦¬í•¨
  - ë¸”ëŸ­2 ìŠ¤ì½”í”„ì˜ í™˜ê²½ ë ˆì½”ë“œì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ê²½ìš° íë¦„
    1. í™˜ê²½ ë ˆì½”ë“œì— ì¡´ì¬í•˜ì§€ ì•ŠìŒì„ í™•ì¸
    2. ìŠ¤ì½”í”„ ì²´ì¸ì„ í†µí•´ì„œ ë¶€ëª¨ì˜ ë ‰ì‹œì»¬ í™˜ê²½ ë ˆì½”ë“œì—ì„œ í™•ì¸
    3. ...
    4. ì „ì—­ ë ‰ì‹œì»¬ í™˜ê²½ê¹Œì§€ ì§„í–‰í•¨
  - ì´ëŸ¬í•œ ê³¼ì •ì„ ê±°ì¹˜ê¸° ë•Œë¬¸ì—, ë©”ëª¨ë¦¬ ì¸¡ë©´ ë¿ë§Œ ì•„ë‹ˆë¼ `í¼í¬ë¨¼ìŠ¤ì˜ ê°œì„ ì„ ìœ„í•´ì„œë¼ë„` ìµœëŒ€í•œ í•„ìš”í•œ ê³³ì—ì„œë§Œ ì •ì˜í•˜ëŠ” ê²ƒì´ í•„ìš”

## í˜¸ì´ìŠ¤íŒ… ì •ë¦¬

- í˜¸ì´ìŠ¤íŒ… â†’ ëŒì–´ ì˜¬ë¦¬ë‹¤
- JavaScript Engine(ë²ˆì—­ê¸°, ì¸í„°í”„ë¦¬í„°)ì´ `ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „`ì— `ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤ì˜ ì„ ì–¸`ì„ ì œì¼ ìœ„ë¡œ ëŒì–´ì˜¬ë¦¬ëŠ” ê²ƒ
- ë³€ìˆ˜ì˜ ì„ ì–¸ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•œ ë’¤, `ì„ ì–¸ë§Œ ì½”ë“œì˜ ìµœìƒë‹¨`ìœ¼ë¡œ ì˜®ê¹€
- ë³€ìˆ˜ì˜ ì„ ì–¸ë¬¸
  - let â†’ ì¬í• ë‹¹ì´ ë°˜ë“œì‹œ í•„ìš”í•œ ê²½ìš°
  - const â†’ ì¬í• ë‹¹ì´ í•„ìš”ì—†ì„ ê²½ìš°, í˜¹ì€ ê¸°ë³¸ì ìœ¼ë¡œ
  - var â†’ ECMA Script 6 ì´ì „, ì‚¬ìš©í•˜ì§€ ë§ì

```jsx
// í•¨ìˆ˜ì˜ í˜¸ì´ìŠ¤íŒ…ì€ í•¨ìˆ˜ì˜ ì„ ì–¸ë¬¸ ì „ì— í˜¸ì¶œì´ ê°€ëŠ¥í•˜ê²Œ í•´ì¤Œ
// í•¨ìˆ˜ì˜ ì„ ì–¸ë¬¸ì€ ì„ ì–¸ ì´ì „ì—ë„ í˜¸ì¶œì´ ê°€ëŠ¥í•¨
print();

function print() {
  console.log('Hello');
}

// ë³€ìˆ˜ (let, const)ì™€ í´ë˜ìŠ¤ëŠ” ì„ ì–¸ë§Œ í˜¸ì´ìŠ¤íŒ…ì´ ë˜ê³ , ì´ˆê¸°í™”ëŠ” ì•ˆë¨
// ì´ˆê¸°í™” ì „, ë³€ìˆ˜ì— ì ‘ê·¼í•˜ë©´ ì»´íŒŒì¼(ë¹Œë“œ)ì—ëŸ¬ê°€ ë°œìƒí•¨
// console.log(hi);
let hi = 'hi';
//func1();
let func1 = function () {};
// const cat = new Cat();
class Cat {}

let x = 1;
{
  console.log(x);
  // let x = 2;
  // ì§€ì—­ ë ‰ì‹œì»¬ í™˜ê²½ì´ ìš°ì„ ì‹œë˜ê¸° ë•Œë¬¸ì—
  // let xì˜ ì„ ì–¸ë¶€ê°€ í˜¸ì´ìŠ¤íŒ…ë¨
}
```

## var ë³€ìˆ˜ì— ëŒ€í•´ì„œ

```jsx
// varì˜ íŠ¹ì§• ğŸ’©
// -> ì¼ë°˜ ì½”ë”© ë°©ì‹ê³¼ ì–´ê¸‹ë‚˜ì„œ ê°œë°œí•˜ë©´ì„œë„ ë©˜ë¶•ì´ ì˜´
// -> ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì— ì¢‹ì§€ ì•ŠìŒ

// 1. ë³€ìˆ˜ ì„ ì–¸í•˜ëŠ” í‚¤ì›Œë“œ ì—†ì´ ì„ ì–¸ê³¼ í• ë‹¹ì´ ê°€ëŠ¥
// ì„ ì–¸ì¸ì§€ ì¬í• ë‹¹ì¸ì§€ êµ¬ë¶„ì´ ì–´ë ¤ì›€
something = 'ğŸ’©';
console.log(something);

// 2. ì¤‘ë³µ ì„ ì–¸ì´ ê°€ëŠ¥í•¨
// í˜‘ì—…ê³¼ì •ì—ì„œ ë‚˜ë„ ëª¨ë¥´ê²Œ ì¬í• ë‹¹ì„ í•´ë²„ë¦´ ê°€ëŠ¥ì„±ì´ ìˆìŒ
var poo = 'ğŸ’©';
var poo = 'ğŸ’©';
var poo = 'ğŸ’©';
console.log(poo);

// 3. ë¸”ë¡ ë ˆë²¨ ìŠ¤ì½”í”„ ì•ˆë¨ âŒ
var apple = 'ì‚¬ê³¼';
{
  var apple = 'ğŸ';
  {
    var apple = 'ğŸ';
  }
}
console.log(apple);

// 4. í•¨ìˆ˜ ë ˆë²¨ ìŠ¤ì½”í”„ëŠ” ì§€ì› ë¨
function example() {
  var dog = 'ğŸ¶';
}
//console.log(dog);
```

## ì—„ê²© ëª¨ë“œ

[Strict mode - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)

```jsx
'use strict';
// ì—„ê²© ëª¨ë“œ strict mode
// ë¦¬ì•¡íŠ¸ì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ ì‚¬ìš©ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ì—„ê²© ëª¨ë“œì„
// var x = 1;
// delete x;

function add(x) {
  var a = 2;
  var b = a + x;
  console.log(this);
}
add(1);

const array = [1, 2, 3];
//for (num of array) {
//  console.log(num);
//}
```
