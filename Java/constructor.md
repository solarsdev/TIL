# 생성자 (Constructor)

## 생성자란?

- 인스턴스가 생성될 때 호출되는 일종의 “인스턴스 초기화 메서드”
- 주로 인스턴스 변수의 초기화에 이용되며, 기타 인스턴스 생성시 필요한 작업을 명세
- 클래스 내에 메서드처럼 선언되지만 어떠한 리턴값도 없고, 그렇다고 void를 명시하지도 않음

### 생성자 조건

1. 생성자의 이름은 클래스의 이름과 같아야 함
2. 생성자는 리턴이 없음

- 생성자도 오버로딩이 가능하므로 여러 생성자가 존재 가능

```java
class Card {
	Card() {}
	Card(String k, int num) {}
}
```

## 기본 생성자 (default constructor)

- 모든 클래스에는 생성자가 최소 1개는 존재해야 함
  - 단, 코드상에 생성자가 존재할 필요는 없고, 만약 없다면 컴파일러가 최종적으로 기본 생성자를 추가
  ```java
  ClassName() {}
  ```
- 일반적으로 인스턴스를 작성한다 하면 가장 먼저 매개변수를 아무것도 전달해주지 않는것을 생각하게 됨
  ```java
  new ClassName();
  ```
  - 코드상에 생성자가 없어도 이런식으로 인스턴스 생성이 가능한 것은 기본 생성자를 컴파일해주었기 때문
  - 단, 매개변수가 있는 생성자만 코드상에 존재하면 기본 생성자가 추가되지 않으므로 상기의 인스턴스 작성 방식에서 에러가 발생할 수 있음
  > 기본 생성자가 컴파일러에 의해 추가되는 경우는 클래스에 정의된 생성자가 하나도 없을 때 뿐이기 때문임

## 매개변수가 있는 생성자

- 생성자도 메서드(인스턴스 초기화 메서드)이기 때문에, 매개변수를 입력받을 수 있으며, 오버로딩도 가능

```java
// Car 클래스
class Car {
	String color;
	String gearType;
	int door;

	Car() {}
	Car(String c, String g, int d) {
		color = c;
		gearType = g;
		door = d;
	}
}

// 인스턴스 생성 및 초기화
Car c = new Car();
c.color = "white";
c.gearType = "auto";
c.door = 4;

// 생성자를 통한 초기화
Car c = new Car("white", "auto", 4);
```

## 생성자에서 다른 생성자 호출 - this(), this

- 같은 클래스 내의 멤버들 끼리 호출이 가능한 것 처럼, 생성자 간에도 서로 호출이 가능

### 생성자 호출의 조건

1. 생성자의 이름으로 클래스 이름 대신 this를 사용
2. 한 생성자에서 다른 생성자를 호출할때는 항상 코드의 첫줄에서 가능

- 왜 항상 첫줄에서 호출하도록 강요하는가?
  - 생성자에서 초기화 작업을 진행 도중, 다른 생성자를 호출할때 기존 작업이 미치는 영향을 없애기 위함
- 생성자에서 다른 생성자를 호출할 수 있도록 하면, 코드가 좀 더 유기적으로 변화함

### 생성자의 매개변수와 클래스 멤버변수간의 구별

- this를 이용하면 클래스 자체를 의미하기 때문에, 멤버변수의 지정에는 this를 사용하는 것이 일반적임

```java
Car(String c, String g, int d) {}

// 이런식으로 매개변수에 이름을 정확히 지정하는 것이 알기 쉬움
Car(String color, String gearType, int door) {

	// 단, 멤버변수의 이름과 중복되므로, 멤버변수를 지정할때 this를 사용하면 좀 더 명확함
	this.color = color;
	this.gearType = gearType;
	this.door = door;
}
```

- static 메서드 안에서는 this를 사용할 수 없음
  - 인스턴스를 지칭하는 this를 사용할때 클래스 메서드 안에서는 인스턴스 생성 유무에 대한 확신이 없기 때문임

> **this**: 인스턴스 자신을 가리키는 참조변수, 인스턴스의 주소가 저장되어 있다.
> 모든 인스턴스 메서드에 지역변수로 숨겨진 채로 존재한다.

> **this(), this(매개변수)**: 생성자, 같은 클래스의 다른 생성자를 호출할 때 사용한다.

## 생성자를 이용한 인스턴스의 복사

### 인스턴스의 복사란?

- 두 개의 서로 다른 인스턴스가 같은 인스턴스 멤버값(상태)을 가지고 있다면 인스턴스가 동일하다고 할 수 있음
- 인스턴스의 복사는 어떤 인스턴스의 모든 상태값(멤버변수의 값)을 동일하게 설정하여 인스턴스를 생성하는 것을 의미

### Object.clone()

- 인스턴스의 복사를 지원하는 자바 API

### 인스턴스의 복사를 사용하는 이유

- 참조변수를 복사하면 같은 인스턴스를 가리키기 때문에, 참조변수를 이용하 값을 변경하면 복사된 모든 참조변수(주소값)에 영향을 주게 됨
- 인스턴스를 복사(멤버변수의 상태값)하여 새로운 인스턴스를 만들게 되면 각 인스턴스는 독립적이므로 영향을 받지 않음

### 인스턴스를 생성할때는 2가지 사항을 결정해야 함

1. 클래스
   - 어떤 클래스의 인스턴스를 생성할 것인가?
2. 생성자
   - 선택한 클래스의 어떤 생성자로 인스턴스를 생성할 것인가?
