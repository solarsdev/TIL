# 다형성 (polymorphism)

## 다형성이란?

- 여러가지 형태를 가질 수 있는 능력
- 하나의 참조변수로 여러 타입의 객체를 참조할 수 있도록 하여 다형성을 구현
  - 조상타입의 참조변수로 자손타입의 인스턴스를 참조할 수 있다는 것

```java
class Tv {}
class CaptionTV extends Tv {}

Tv t = new Tv();
CaptionTv c = new CaptionTv();

// ->
Tv t = new CaptionTv();
```

- 조상타입의 참조변수로 자손타입의 인스턴스를 참조하면 어떤것이 다르고, 왜 그렇게 하는가
  - 조상타입(Tv)의 참조변수로는 자손타입에서 추가적으로 구현한 멤버들에 접근할 수 없음

> 조상타입의 참조변수로 자손타입의 인스턴스 참조 가능
> 자손타입의 참조변수로 조상타입의 인스턴스 참조 불가

## 참조변수의 형변환

![images/polymorphism/1.png](images/polymorphism/1.png)

- 서로 상속관계에 있는 타입간의 형변환만 가능
- 자손타입에서 조상타입으로 형변환하는 경우, 형변환 생략 가능
  - 자손타입의 참조변수보다 조상타입의 참조변수가 다루는 멤버가 적은것이 명확하므로 생략 가능
- 자손 → 조상 (업캐스팅)
- 조상 → 자손 (다운캐스팅)
  - 다운캐스팅이 가능하다고 하더라도, 기본적으로 인스턴스 자체가 이미 자손타입(혹은 그 이하)인 경우에만 가능한 것이지, 조상타입의 인스턴스를 자손타입의 참조변수로 참조할 수 없기 때문에 불가능한 경우가 있음
- 같은 조상을 가지고 있다고 해서 형제들간에 한번에 형변환을 하는 것은 허용되지 않음

## `instanceof` 연산자

- 참조변수가 참조하는 인스턴스의 실제타입을 체크하는데 사용
- 이항연산자이며 피연산자는 참조형 변수와 타입, 연산결과는 true 또는 false
- `instanceof`의 연산결과가 ture 인 경우, 해당 타입으로 참조변수의 형변환이 가능하다는 뜻

## 참조변수와 인스턴스의 연결

- 멤버변수가 중복정의된 경우, 참조변수의 타입에 따라 연결되는 멤버변수가 달라짐 (참조변수 타입에 따라 해당 멤버변수가 호출됨)
- 메서드가 중복정의된 경우, 참조변수의 타입에 관계없이 항상 실제 인스턴스에 정의된 메서드가 호출됨

## 매개변수의 다형성

- 참조형 매개변수는 메서드 호출시, 자신과 같은 타입 또는 자손타입의 인스턴스를 넘겨줄 수 있음
- 이를 이용하면, 메서드를 일일히 오버로딩하지 않고 조상타입의 매개변수를 이용하여 코드의 중복을 줄일 수 있음

## 여러 종류의 객체를 배열로 다루기

- 조상타입의 배열에 자손들의 객체를 담을 수 있음
- 조상타입에 정의한 메서드를 자손타입의 객체에 일관되게 처리할때 조상타입의 매개변수로 입력받아 처리하는 로직등을 통해 코드의 중복을 줄일 수 있음
